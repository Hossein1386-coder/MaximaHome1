<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… - Ù…Ø§Ú©Ø³ÛŒÙ…Ø§ Ù‡ÙˆÙ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        const firebaseCDNs = [
            'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js',
            'https://cdn.jsdelivr.net/npm/firebase@10.7.1/app/dist/index.esm.js',
            'https://unpkg.com/firebase@10.7.1/app/dist/index.esm.js'
        ];
        
        const authCDNs = [
            'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js',
            'https://cdn.jsdelivr.net/npm/firebase@10.7.1/auth/dist/index.esm.js',
            'https://unpkg.com/firebase@10.7.1/auth/dist/index.esm.js'
        ];
        
        // Dynamic import with fallback
        async function loadFirebaseModule(cdnUrls, moduleName) {
            for (const url of cdnUrls) {
                try {
                    const module = await import(url);
                    console.log(`âœ… Successfully loaded ${moduleName} from ${url}`);
                    return module;
                } catch (error) {
                    console.warn(`âš ï¸ Failed to load ${moduleName} from ${url}:`, error.message);
                    continue;
                }
            }
            console.error(`âŒ Failed to load ${moduleName} from any CDN`);
            throw new Error(`Failed to load ${moduleName} from any CDN`);
        }
        
        // Load Firebase modules
        const { initializeApp } = await loadFirebaseModule(firebaseCDNs, 'firebase-app');
        const { getAuth, signInWithEmailAndPassword, onAuthStateChanged } = await loadFirebaseModule(authCDNs, 'firebase-auth');
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBO3KMKqhSCE7XlBs9M679U1cAxEFPYYM4",
            authDomain: "maximahome-6beaa.firebaseapp.com",
            projectId: "maximahome-6beaa",
            storageBucket: "maximahome-6beaa.firebasestorage.app",
            messagingSenderId: "995203170989",
            appId: "1:995203170989:web:b3b42e123392cc058e3c24",
            measurementId: "G-WCN6S728JG"
        };
        
        // Initialize Firebase
        let retryCount = 0;
        const maxRetries = 3;
        
        async function initializeFirebase() {
            try {
                console.log('ğŸ”„ Initializing Firebase...');
                const app = initializeApp(firebaseConfig);
                const auth = getAuth(app);
                
                // Make Firebase available globally
                window.firebase = { auth, signInWithEmailAndPassword, onAuthStateChanged };
                
                console.log('âœ… Firebase initialized successfully');
                
                // Check if user is already logged in
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        // User is already logged in, redirect to index
                        window.location.href = 'index.html';
                    }
                });
                
                return true;
            } catch (error) {
                console.error('âŒ Firebase initialization failed:', error.message);
                retryCount++;
                
                if (retryCount < maxRetries) {
                    console.log(`ğŸ”„ Retrying Firebase initialization (${retryCount}/${maxRetries})...`);
                    setTimeout(initializeFirebase, 2000 * retryCount);
                    return false;
                } else {
                    console.error('âŒ Firebase initialization failed after all retries');
                    showError('Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.');
                    return false;
                }
            }
        }
        
        // Start Firebase initialization
        initializeFirebase();
    </script>
    
    <style>
        .login-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 100vh;
        }
        
        .login-image-section {
            background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .login-image-section::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }
        
        .login-image-content {
            position: relative;
            z-index: 10;
            text-align: center;
            color: white;
            padding: 2rem;
        }
        
        .login-image-content h2 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .login-image-content p {
            font-size: 1.1rem;
            opacity: 0.95;
        }
        
        .login-form-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .login-form-container {
            width: 100%;
            max-width: 420px;
        }
        
        .login-form-header {
            margin-bottom: 2rem;
        }
        
        .login-form-header h1 {
            font-size: 2rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .login-form-header p {
            color: #6b7280;
            font-size: 0.95rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: all 0.2s;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .password-wrapper {
            position: relative;
        }
        
        .password-toggle {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #6b7280;
            padding: 0.5rem;
        }
        
        .login-button {
            width: 100%;
            padding: 0.875rem;
            background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3);
        }
        
        .login-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .error-message {
            background-color: #fee;
            border: 1px solid #fcc;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
            font-size: 0.875rem;
        }
        
        .error-message.show {
            display: block;
        }
        
        .success-message {
            background-color: #efe;
            border: 1px solid #cfc;
            color: #3c3;
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
            font-size: 0.875rem;
        }
        
        .success-message.show {
            display: block;
        }
        
        .divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: #9ca3af;
            font-size: 0.875rem;
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e7eb;
        }
        
        .divider span {
            padding: 0 1rem;
        }
        
        .social-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .social-button {
            width: 50px;
            height: 50px;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-color: #d1d5db;
        }
        
        @media (max-width: 768px) {
            .login-container {
                grid-template-columns: 1fr;
            }
            
            .login-image-section {
                display: none;
            }
            
            .login-form-section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body class="overflow-hidden">
    <div class="login-container">
        <!-- Image Section (Left) -->
        <div class="login-image-section">
            <div class="login-image-content">
                <h2>Ù…Ø§Ú©Ø³ÛŒÙ…Ø§ Ù‡ÙˆÙ…</h2>
                <p>Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø°ÛŒØ±Ø´ Ø®ÙˆØ¯Ø±Ùˆ</p>
                <div class="mt-8">
                    <svg width="300" height="300" viewBox="0 0 300 300" fill="none" xmlns="http://www.w3.org/2000/svg" class="mx-auto opacity-90">
                        <circle cx="150" cy="150" r="120" fill="rgba(255,255,255,0.2)"/>
                        <path d="M100 120 L150 80 L200 120 L200 180 L150 220 L100 180 Z" fill="rgba(255,255,255,0.3)"/>
                        <circle cx="150" cy="150" r="40" fill="rgba(255,255,255,0.4)"/>
                        <path d="M130 140 L150 120 L170 140 L170 160 L150 180 L130 160 Z" fill="rgba(255,255,255,0.5)"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Form Section (Right) -->
        <div class="login-form-section">
            <div class="login-form-container">
                <div class="login-form-header">
                    <h1>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h1>
                    <p>Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø´ÙˆÛŒØ¯</p>
                </div>
                
                <div id="error-message" class="error-message"></div>
                <div id="success-message" class="success-message"></div>
                
                <form id="login-form" class="space-y-5">
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" id="username" name="username" required autocomplete="email"
                               class="form-input" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <div class="password-wrapper">
                            <input type="password" id="password" name="password" required autocomplete="current-password"
                                   class="form-input pr-12" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                            <button type="button" class="password-toggle" onclick="togglePassword()">
                                <svg id="eye-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                <svg id="eye-off-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: none;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <button type="submit" id="login-button" class="login-button">
                        ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eye-icon');
            const eyeOffIcon = document.getElementById('eye-off-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.style.display = 'none';
                eyeOffIcon.style.display = 'block';
            } else {
                passwordInput.type = 'password';
                eyeIcon.style.display = 'block';
                eyeOffIcon.style.display = 'none';
            }
        }
        
        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
            
            const successDiv = document.getElementById('success-message');
            successDiv.classList.remove('show');
            
            setTimeout(() => {
                errorDiv.classList.remove('show');
            }, 5000);
        }
        
        function showSuccess(message) {
            const successDiv = document.getElementById('success-message');
            successDiv.textContent = message;
            successDiv.classList.add('show');
            
            const errorDiv = document.getElementById('error-message');
            errorDiv.classList.remove('show');
        }
        
        async function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const submitBtn = document.getElementById('login-button');
            const originalText = submitBtn.textContent;
            
            // Show loading state
            submitBtn.textContent = 'Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...';
            submitBtn.disabled = true;
            
            // Hide previous messages
            document.getElementById('error-message').classList.remove('show');
            document.getElementById('success-message').classList.remove('show');
            
            try {
                // Wait for Firebase to be available
                if (!window.firebase) {
                    console.log('Waiting for Firebase to initialize...');
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    if (!window.firebase) {
                        throw new Error('Firebase not available');
                    }
                }
                
                // Use Firebase authentication
                const { signInWithEmailAndPassword } = window.firebase;
                await signInWithEmailAndPassword(window.firebase.auth, email, password);
                
                // Successful login
                showSuccess('ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ². Ø¯Ø± Ø­Ø§Ù„ Ù‡Ø¯Ø§ÛŒØª...');
                
                // Redirect to index.html after short delay
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
                
            } catch (error) {
                console.error('Login error:', error);
                
                let errorMessage = 'Ø®Ø·Ø§ Ø¯Ø± ÙˆØ±ÙˆØ¯';
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ÙØª Ù†Ø´Ø¯';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'ØªØ¹Ø¯Ø§Ø¯ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø²ÛŒØ§Ø¯ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯';
                } else if (error.message === 'Firebase not available') {
                    errorMessage = 'Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯';
                }
                
                showError(errorMessage);
            } finally {
                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        }
        
        // Set up login form
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
        });
    </script>
</body>
</html>
